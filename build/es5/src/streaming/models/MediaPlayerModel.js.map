{"version":3,"sources":["../../../../../src/streaming/models/MediaPlayerModel.js"],"names":[],"mappings":"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","file":"MediaPlayerModel.js","sourcesContent":["/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\nimport FactoryMaker from '../../core/FactoryMaker';\nimport {\n    HTTPRequest\n}\nfrom '../vo/metrics/HTTPRequest';\nimport Constants from '../constants/Constants';\n\nconst DEFAULT_UTC_TIMING_SOURCE = {\n    scheme: 'urn:mpeg:dash:utc:http-xsdate:2014',\n    value: 'http://time.akamai.com/?iso'\n};\nconst LIVE_DELAY_FRAGMENT_COUNT = 4;\n\nconst DEFAULT_LOCAL_STORAGE_BITRATE_EXPIRATION = 360000;\nconst DEFAULT_LOCAL_STORAGE_MEDIA_SETTINGS_EXPIRATION = 360000;\n\nconst BANDWIDTH_SAFETY_FACTOR = 0.9;\nconst CACHE_LOAD_THRESHOLD_VIDEO = 50;\nconst CACHE_LOAD_THRESHOLD_AUDIO = 5;\nconst ABANDON_LOAD_TIMEOUT = 10000;\n\nconst BUFFER_TO_KEEP = 30;\nconst BUFFER_PRUNING_INTERVAL = 30;\nconst DEFAULT_MIN_BUFFER_TIME = 12;\nconst DEFAULT_MIN_BUFFER_TIME_FAST_SWITCH = 20;\nconst BUFFER_TIME_AT_TOP_QUALITY = 30;\nconst BUFFER_TIME_AT_TOP_QUALITY_LONG_FORM = 60;\nconst LONG_FORM_CONTENT_DURATION_THRESHOLD = 600;\n\nconst FRAGMENT_RETRY_ATTEMPTS = 3;\nconst FRAGMENT_RETRY_INTERVAL = 1000;\n\nconst MANIFEST_RETRY_ATTEMPTS = 3;\nconst MANIFEST_RETRY_INTERVAL = 500;\n\nconst XLINK_RETRY_ATTEMPTS = 1;\nconst XLINK_RETRY_INTERVAL = 500;\n\n//This value influences the startup time for live (in ms).\nconst WALLCLOCK_TIME_UPDATE_INTERVAL = 50;\n\nconst DEFAULT_XHR_WITH_CREDENTIALS = false;\n\nfunction MediaPlayerModel() {\n\n    let instance,\n        useManifestDateHeaderTimeSource,\n        useSuggestedPresentationDelay,\n        UTCTimingSources,\n        liveDelayFragmentCount,\n        liveDelay,\n        scheduleWhilePaused,\n        bufferToKeep,\n        bufferPruningInterval,\n        lastBitrateCachingInfo,\n        lastMediaSettingsCachingInfo,\n        stableBufferTime,\n        bufferTimeAtTopQuality,\n        bufferTimeAtTopQualityLongForm,\n        longFormContentDurationThreshold,\n        bandwidthSafetyFactor,\n        cacheLoadThresholdVideo,\n        cacheLoadThresholdAudio,\n        abandonLoadTimeout,\n        retryAttempts,\n        retryIntervals,\n        wallclockTimeUpdateInterval,\n        ABRStrategy,\n        useDefaultABRRules,\n        xhrWithCredentials,\n        fastSwitchEnabled,\n        customABRRule,\n        movingAverageMethod;\n\n    function setup() {\n        UTCTimingSources = [];\n        useSuggestedPresentationDelay = false;\n        useManifestDateHeaderTimeSource = true;\n        scheduleWhilePaused = true;\n        ABRStrategy = Constants.ABR_STRATEGY_DYNAMIC;\n        useDefaultABRRules = true;\n        fastSwitchEnabled = false;\n        lastBitrateCachingInfo = {\n            enabled: true,\n            ttl: DEFAULT_LOCAL_STORAGE_BITRATE_EXPIRATION\n        };\n        lastMediaSettingsCachingInfo = {\n            enabled: true,\n            ttl: DEFAULT_LOCAL_STORAGE_MEDIA_SETTINGS_EXPIRATION\n        };\n        liveDelayFragmentCount = LIVE_DELAY_FRAGMENT_COUNT;\n        liveDelay = undefined; // Explicitly state that default is undefined\n        bufferToKeep = BUFFER_TO_KEEP;\n        bufferPruningInterval = BUFFER_PRUNING_INTERVAL;\n        stableBufferTime = NaN;\n        bufferTimeAtTopQuality = BUFFER_TIME_AT_TOP_QUALITY;\n        bufferTimeAtTopQualityLongForm = BUFFER_TIME_AT_TOP_QUALITY_LONG_FORM;\n        longFormContentDurationThreshold = LONG_FORM_CONTENT_DURATION_THRESHOLD;\n        bandwidthSafetyFactor = BANDWIDTH_SAFETY_FACTOR;\n        cacheLoadThresholdVideo = CACHE_LOAD_THRESHOLD_VIDEO;\n        cacheLoadThresholdAudio = CACHE_LOAD_THRESHOLD_AUDIO;\n        abandonLoadTimeout = ABANDON_LOAD_TIMEOUT;\n        wallclockTimeUpdateInterval = WALLCLOCK_TIME_UPDATE_INTERVAL;\n        xhrWithCredentials = {\n            default: DEFAULT_XHR_WITH_CREDENTIALS\n        };\n        customABRRule = [];\n        movingAverageMethod = Constants.MOVING_AVERAGE_SLIDING_WINDOW;\n\n        retryAttempts = {\n            [HTTPRequest.MPD_TYPE]:                         MANIFEST_RETRY_ATTEMPTS,\n            [HTTPRequest.XLINK_EXPANSION_TYPE]:             XLINK_RETRY_ATTEMPTS,\n            [HTTPRequest.MEDIA_SEGMENT_TYPE]:               FRAGMENT_RETRY_ATTEMPTS,\n            [HTTPRequest.INIT_SEGMENT_TYPE]:                FRAGMENT_RETRY_ATTEMPTS,\n            [HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]: FRAGMENT_RETRY_ATTEMPTS,\n            [HTTPRequest.INDEX_SEGMENT_TYPE]:               FRAGMENT_RETRY_ATTEMPTS,\n            [HTTPRequest.OTHER_TYPE]:                       FRAGMENT_RETRY_ATTEMPTS\n        };\n\n        retryIntervals = {\n            [HTTPRequest.MPD_TYPE]:                         MANIFEST_RETRY_INTERVAL,\n            [HTTPRequest.XLINK_EXPANSION_TYPE]:             XLINK_RETRY_INTERVAL,\n            [HTTPRequest.MEDIA_SEGMENT_TYPE]:               FRAGMENT_RETRY_INTERVAL,\n            [HTTPRequest.INIT_SEGMENT_TYPE]:                FRAGMENT_RETRY_INTERVAL,\n            [HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]: FRAGMENT_RETRY_INTERVAL,\n            [HTTPRequest.INDEX_SEGMENT_TYPE]:               FRAGMENT_RETRY_INTERVAL,\n            [HTTPRequest.OTHER_TYPE]:                       FRAGMENT_RETRY_INTERVAL\n        };\n    }\n\n    //TODO Should we use Object.define to have setters/getters? makes more readable code on other side.\n\n    function setABRStrategy(value) {\n        ABRStrategy = value;\n    }\n\n    function getABRStrategy() {\n        return ABRStrategy;\n    }\n\n    function setUseDefaultABRRules(value) {\n        useDefaultABRRules = value;\n    }\n\n    function getUseDefaultABRRules() {\n        return useDefaultABRRules;\n    }\n\n    function findABRCustomRule(rulename) {\n        let i;\n        for (i = 0; i < customABRRule.length; i++) {\n            if (customABRRule[i].rulename === rulename) {\n                return i;\n            }\n        }\n        return -1;\n    }\n\n    function getABRCustomRules() {\n        return customABRRule;\n    }\n\n    function addABRCustomRule(type, rulename, rule) {\n\n        let index = findABRCustomRule(rulename);\n        if (index === -1) {\n            // add rule\n            customABRRule.push({\n                type: type,\n                rulename: rulename,\n                rule: rule\n            });\n        } else {\n            // update rule\n            customABRRule[index].type = type;\n            customABRRule[index].rule = rule;\n        }\n    }\n\n    function removeABRCustomRule(rulename) {\n        let index = findABRCustomRule(rulename);\n        if (index !== -1) {\n            // remove rule\n            customABRRule.splice(index, 1);\n        }\n    }\n\n    function removeAllABRCustomRule() {\n        customABRRule = [];\n    }\n\n    function setBandwidthSafetyFactor(value) {\n        bandwidthSafetyFactor = value;\n    }\n\n    function getBandwidthSafetyFactor() {\n        return bandwidthSafetyFactor;\n    }\n\n    function setCacheLoadThresholdVideo(value) {\n        cacheLoadThresholdVideo = value;\n    }\n\n    function getCacheLoadThresholdVideo() {\n        return cacheLoadThresholdVideo;\n    }\n\n    function setCacheLoadThresholdAudio(value) {\n        cacheLoadThresholdAudio = value;\n    }\n\n    function getCacheLoadThresholdAudio() {\n        return cacheLoadThresholdAudio;\n    }\n\n    function setAbandonLoadTimeout(value) {\n        abandonLoadTimeout = value;\n    }\n\n    function getAbandonLoadTimeout() {\n        return abandonLoadTimeout;\n    }\n\n    function setStableBufferTime(value) {\n        stableBufferTime = value;\n    }\n\n    function getStableBufferTime() {\n        return !isNaN(stableBufferTime) ? stableBufferTime : fastSwitchEnabled ? DEFAULT_MIN_BUFFER_TIME_FAST_SWITCH : DEFAULT_MIN_BUFFER_TIME;\n    }\n\n    function setBufferTimeAtTopQuality(value) {\n        bufferTimeAtTopQuality = value;\n    }\n\n    function getBufferTimeAtTopQuality() {\n        return bufferTimeAtTopQuality;\n    }\n\n    function setBufferTimeAtTopQualityLongForm(value) {\n        bufferTimeAtTopQualityLongForm = value;\n    }\n\n    function getBufferTimeAtTopQualityLongForm() {\n        return bufferTimeAtTopQualityLongForm;\n    }\n\n    function setLongFormContentDurationThreshold(value) {\n        longFormContentDurationThreshold = value;\n    }\n\n    function getLongFormContentDurationThreshold() {\n        return longFormContentDurationThreshold;\n    }\n\n    function setBufferToKeep(value) {\n        bufferToKeep = value;\n    }\n\n    function getBufferToKeep() {\n        return bufferToKeep;\n    }\n\n    function setLastBitrateCachingInfo(enable, ttl) {\n        lastBitrateCachingInfo.enabled = enable;\n        if (ttl !== undefined && !isNaN(ttl) && typeof (ttl) === 'number') {\n            lastBitrateCachingInfo.ttl = ttl;\n        }\n    }\n\n    function getLastBitrateCachingInfo() {\n        return lastBitrateCachingInfo;\n    }\n\n    function setLastMediaSettingsCachingInfo(enable, ttl) {\n        lastMediaSettingsCachingInfo.enabled = enable;\n        if (ttl !== undefined && !isNaN(ttl) && typeof (ttl) === 'number') {\n            lastMediaSettingsCachingInfo.ttl = ttl;\n        }\n    }\n\n    function getLastMediaSettingsCachingInfo() {\n        return lastMediaSettingsCachingInfo;\n    }\n\n    function setBufferPruningInterval(value) {\n        bufferPruningInterval = value;\n    }\n\n    function getBufferPruningInterval() {\n        return bufferPruningInterval;\n    }\n\n    function setFragmentRetryAttempts(value) {\n        retryAttempts[HTTPRequest.MEDIA_SEGMENT_TYPE] = value;\n    }\n\n    function setManifestRetryAttempts(value) {\n        retryAttempts[HTTPRequest.MPD_TYPE] = value;\n    }\n\n    function setRetryAttemptsForType(type, value) {\n        retryAttempts[type] = value;\n    }\n\n    function getFragmentRetryAttempts() {\n        return retryAttempts[HTTPRequest.MEDIA_SEGMENT_TYPE];\n    }\n\n    function getManifestRetryAttempts() {\n        return retryAttempts[HTTPRequest.MPD_TYPE];\n    }\n\n    function getRetryAttemptsForType(type) {\n        return retryAttempts[type];\n    }\n\n    function setFragmentRetryInterval(value) {\n        retryIntervals[HTTPRequest.MEDIA_SEGMENT_TYPE] = value;\n    }\n\n    function setManifestRetryInterval(value) {\n        retryIntervals[HTTPRequest.MPD_TYPE] = value;\n    }\n\n    function setRetryIntervalForType(type, value) {\n        retryIntervals[type] = value;\n    }\n\n    function getFragmentRetryInterval() {\n        return retryIntervals[HTTPRequest.MEDIA_SEGMENT_TYPE];\n    }\n\n    function getManifestRetryInterval() {\n        return retryIntervals[HTTPRequest.MPD_TYPE];\n    }\n\n    function getRetryIntervalForType(type) {\n        return retryIntervals[type];\n    }\n\n    function setWallclockTimeUpdateInterval(value) {\n        wallclockTimeUpdateInterval = value;\n    }\n\n    function getWallclockTimeUpdateInterval() {\n        return wallclockTimeUpdateInterval;\n    }\n\n    function setScheduleWhilePaused(value) {\n        scheduleWhilePaused = value;\n    }\n\n    function getScheduleWhilePaused() {\n        return scheduleWhilePaused;\n    }\n\n    function setLiveDelayFragmentCount(value) {\n        liveDelayFragmentCount = value;\n    }\n\n    function setLiveDelay(value) {\n        liveDelay = value;\n    }\n\n    function getLiveDelayFragmentCount() {\n        return liveDelayFragmentCount;\n    }\n\n    function getLiveDelay() {\n        return liveDelay;\n    }\n\n    function setUseManifestDateHeaderTimeSource(value) {\n        useManifestDateHeaderTimeSource = value;\n    }\n\n    function getUseManifestDateHeaderTimeSource() {\n        return useManifestDateHeaderTimeSource;\n    }\n\n    function setUseSuggestedPresentationDelay(value) {\n        useSuggestedPresentationDelay = value;\n    }\n\n    function getUseSuggestedPresentationDelay() {\n        return useSuggestedPresentationDelay;\n    }\n\n    function setUTCTimingSources(value) {\n        UTCTimingSources = value;\n    }\n\n    function getUTCTimingSources() {\n        return UTCTimingSources;\n    }\n\n    function setXHRWithCredentialsForType(type, value) {\n        if (!type) {\n            Object.keys(xhrWithCredentials).forEach(key => {\n                setXHRWithCredentialsForType(key, value);\n            });\n        } else {\n            xhrWithCredentials[type] = !!value;\n        }\n    }\n\n    function getXHRWithCredentialsForType(type) {\n        const useCreds = xhrWithCredentials[type];\n\n        if (useCreds === undefined) {\n            return xhrWithCredentials.default;\n        }\n\n        return useCreds;\n    }\n\n\n    function getFastSwitchEnabled() {\n        return fastSwitchEnabled;\n    }\n\n    function setFastSwitchEnabled(value) {\n        fastSwitchEnabled = value;\n    }\n\n    function setMovingAverageMethod(value) {\n        movingAverageMethod = value;\n    }\n\n    function getMovingAverageMethod() {\n        return movingAverageMethod;\n    }\n\n    function reset() {\n        //TODO need to figure out what props to persist across sessions and which to reset if any.\n        //setup();\n    }\n\n    instance = {\n        setABRStrategy: setABRStrategy,\n        getABRStrategy: getABRStrategy,\n        setUseDefaultABRRules: setUseDefaultABRRules,\n        getUseDefaultABRRules: getUseDefaultABRRules,\n        getABRCustomRules: getABRCustomRules,\n        addABRCustomRule: addABRCustomRule,\n        removeABRCustomRule: removeABRCustomRule,\n        removeAllABRCustomRule: removeAllABRCustomRule,\n        setBandwidthSafetyFactor: setBandwidthSafetyFactor,\n        getBandwidthSafetyFactor: getBandwidthSafetyFactor,\n        setCacheLoadThresholdVideo: setCacheLoadThresholdVideo,\n        getCacheLoadThresholdVideo: getCacheLoadThresholdVideo,\n        setCacheLoadThresholdAudio: setCacheLoadThresholdAudio,\n        getCacheLoadThresholdAudio: getCacheLoadThresholdAudio,\n        setAbandonLoadTimeout: setAbandonLoadTimeout,\n        getAbandonLoadTimeout: getAbandonLoadTimeout,\n        setLastBitrateCachingInfo: setLastBitrateCachingInfo,\n        getLastBitrateCachingInfo: getLastBitrateCachingInfo,\n        setLastMediaSettingsCachingInfo: setLastMediaSettingsCachingInfo,\n        getLastMediaSettingsCachingInfo: getLastMediaSettingsCachingInfo,\n        setStableBufferTime: setStableBufferTime,\n        getStableBufferTime: getStableBufferTime,\n        setBufferTimeAtTopQuality: setBufferTimeAtTopQuality,\n        getBufferTimeAtTopQuality: getBufferTimeAtTopQuality,\n        setBufferTimeAtTopQualityLongForm: setBufferTimeAtTopQualityLongForm,\n        getBufferTimeAtTopQualityLongForm: getBufferTimeAtTopQualityLongForm,\n        setLongFormContentDurationThreshold: setLongFormContentDurationThreshold,\n        getLongFormContentDurationThreshold: getLongFormContentDurationThreshold,\n        setBufferToKeep: setBufferToKeep,\n        getBufferToKeep: getBufferToKeep,\n        setBufferPruningInterval: setBufferPruningInterval,\n        getBufferPruningInterval: getBufferPruningInterval,\n        setFragmentRetryAttempts: setFragmentRetryAttempts,\n        getFragmentRetryAttempts: getFragmentRetryAttempts,\n        setManifestRetryAttempts: setManifestRetryAttempts,\n        getManifestRetryAttempts: getManifestRetryAttempts,\n        setRetryAttemptsForType: setRetryAttemptsForType,\n        getRetryAttemptsForType: getRetryAttemptsForType,\n        setFragmentRetryInterval: setFragmentRetryInterval,\n        getFragmentRetryInterval: getFragmentRetryInterval,\n        setManifestRetryInterval: setManifestRetryInterval,\n        getManifestRetryInterval: getManifestRetryInterval,\n        setRetryIntervalForType: setRetryIntervalForType,\n        getRetryIntervalForType: getRetryIntervalForType,\n        setWallclockTimeUpdateInterval: setWallclockTimeUpdateInterval,\n        getWallclockTimeUpdateInterval: getWallclockTimeUpdateInterval,\n        setScheduleWhilePaused: setScheduleWhilePaused,\n        getScheduleWhilePaused: getScheduleWhilePaused,\n        getUseSuggestedPresentationDelay: getUseSuggestedPresentationDelay,\n        setUseSuggestedPresentationDelay: setUseSuggestedPresentationDelay,\n        setLiveDelayFragmentCount: setLiveDelayFragmentCount,\n        getLiveDelayFragmentCount: getLiveDelayFragmentCount,\n        getLiveDelay: getLiveDelay,\n        setLiveDelay: setLiveDelay,\n        setUseManifestDateHeaderTimeSource: setUseManifestDateHeaderTimeSource,\n        getUseManifestDateHeaderTimeSource: getUseManifestDateHeaderTimeSource,\n        setUTCTimingSources: setUTCTimingSources,\n        getUTCTimingSources: getUTCTimingSources,\n        setXHRWithCredentialsForType: setXHRWithCredentialsForType,\n        getXHRWithCredentialsForType: getXHRWithCredentialsForType,\n        setFastSwitchEnabled: setFastSwitchEnabled,\n        getFastSwitchEnabled: getFastSwitchEnabled,\n        setMovingAverageMethod: setMovingAverageMethod,\n        getMovingAverageMethod: getMovingAverageMethod,\n        reset: reset\n    };\n\n    setup();\n\n    return instance;\n}\n\n//TODO see if you can move this and not export and just getter to get default value.\nMediaPlayerModel.__dashjs_factory_name = 'MediaPlayerModel';\nlet factory = FactoryMaker.getSingletonFactory(MediaPlayerModel);\nfactory.DEFAULT_UTC_TIMING_SOURCE = DEFAULT_UTC_TIMING_SOURCE;\nFactoryMaker.updateSingletonFactory(MediaPlayerModel.__dashjs_factory_name, factory);\nexport default factory;\n"]}