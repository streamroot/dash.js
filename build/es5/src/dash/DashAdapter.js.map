{"version":3,"sources":["../../../../src/dash/DashAdapter.js"],"names":[],"mappings":"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","file":"DashAdapter.js","sourcesContent":["/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\nimport Constants from '../streaming/constants/Constants';\nimport TrackInfo from '../streaming/vo/TrackInfo';\nimport MediaInfo from '../streaming/vo/MediaInfo';\nimport StreamInfo from '../streaming/vo/StreamInfo';\nimport ManifestInfo from '../streaming/vo/ManifestInfo';\nimport Event from './vo/Event';\nimport FactoryMaker from '../core/FactoryMaker';\nimport cea608parser from '../../externals/cea608-parser';\n\nfunction DashAdapter() {\n\n    //let context = this.context;\n\n    let instance,\n        dashManifestModel,\n        voPeriods,\n        voAdaptations;\n\n    function setup() {\n        reset();\n    }\n\n    function setConfig(config) {\n        if (!config) return;\n\n        if (config.dashManifestModel) {\n            dashManifestModel = config.dashManifestModel;\n        }\n    }\n\n    function getRepresentationForTrackInfo(trackInfo, representationController) {\n        return representationController && trackInfo ? representationController.getRepresentationForQuality(trackInfo.quality) : null;\n    }\n\n    function getAdaptationForMediaInfo(mediaInfo) {\n\n        if (!mediaInfo || !mediaInfo.streamInfo || !mediaInfo.streamInfo.id || !voAdaptations[mediaInfo.streamInfo.id]) return null;\n        return voAdaptations[mediaInfo.streamInfo.id][mediaInfo.index];\n    }\n\n    function getPeriodForStreamInfo(streamInfo, voPeriodsArray) {\n        const ln = voPeriodsArray.length;\n\n        for (let i = 0; i < ln; i++) {\n            let voPeriod = voPeriodsArray[i];\n\n            if (streamInfo.id === voPeriod.id) return voPeriod;\n        }\n\n        return null;\n    }\n\n    function convertRepresentationToTrackInfo(voRepresentation) {\n        let trackInfo = new TrackInfo();\n        const realAdaptation = voRepresentation.adaptation.period.mpd.manifest.Period_asArray[voRepresentation.adaptation.period.index].AdaptationSet_asArray[voRepresentation.adaptation.index];\n        const realRepresentation = dashManifestModel.getRepresentationFor(voRepresentation.index, realAdaptation);\n\n        trackInfo.id = voRepresentation.id;\n        trackInfo.quality = voRepresentation.index;\n        trackInfo.bandwidth = dashManifestModel.getBandwidth(realRepresentation);\n        trackInfo.DVRWindow = voRepresentation.segmentAvailabilityRange;\n        trackInfo.fragmentDuration = voRepresentation.segmentDuration || (voRepresentation.segments && voRepresentation.segments.length > 0 ? voRepresentation.segments[0].duration : NaN);\n        trackInfo.MSETimeOffset = voRepresentation.MSETimeOffset;\n        trackInfo.useCalculatedLiveEdgeTime = voRepresentation.useCalculatedLiveEdgeTime;\n        trackInfo.mediaInfo = convertAdaptationToMediaInfo(voRepresentation.adaptation);\n\n        return trackInfo;\n    }\n\n    function convertAdaptationToMediaInfo(adaptation) {\n        let mediaInfo = new MediaInfo();\n        const realAdaptation = adaptation.period.mpd.manifest.Period_asArray[adaptation.period.index].AdaptationSet_asArray[adaptation.index];\n        let viewpoint;\n\n        mediaInfo.id = adaptation.id;\n        mediaInfo.index = adaptation.index;\n        mediaInfo.type = adaptation.type;\n        mediaInfo.streamInfo = convertPeriodToStreamInfo(adaptation.period);\n        mediaInfo.representationCount = dashManifestModel.getRepresentationCount(realAdaptation);\n        mediaInfo.lang = dashManifestModel.getLanguageForAdaptation(realAdaptation);\n        viewpoint = dashManifestModel.getViewpointForAdaptation(realAdaptation);\n        mediaInfo.viewpoint = viewpoint ? viewpoint.value : undefined;\n        mediaInfo.accessibility = dashManifestModel.getAccessibilityForAdaptation(realAdaptation).map(function (accessibility) {\n            let accessibilityValue = accessibility.value;\n            let accessibilityData = accessibilityValue;\n            if (accessibility.schemeIdUri && (accessibility.schemeIdUri.search('cea-608') >= 0) && typeof (cea608parser) !== 'undefined') {\n                if (accessibilityValue) {\n                    accessibilityData = 'cea-608:' + accessibilityValue;\n                } else {\n                    accessibilityData = 'cea-608';\n                }\n                mediaInfo.embeddedCaptions = true;\n            }\n            return accessibilityData;\n        });\n\n        mediaInfo.audioChannelConfiguration = dashManifestModel.getAudioChannelConfigurationForAdaptation(realAdaptation).map(function (audioChannelConfiguration) {\n            return audioChannelConfiguration.value;\n        });\n        mediaInfo.roles = dashManifestModel.getRolesForAdaptation(realAdaptation).map(function (role) {\n            return role.value;\n        });\n        mediaInfo.codec = dashManifestModel.getCodec(realAdaptation);\n        mediaInfo.mimeType = dashManifestModel.getMimeType(realAdaptation);\n        mediaInfo.contentProtection = dashManifestModel.getContentProtectionData(realAdaptation);\n        mediaInfo.bitrateList = dashManifestModel.getBitrateListForAdaptation(realAdaptation);\n\n        if (mediaInfo.contentProtection) {\n            mediaInfo.contentProtection.forEach(function (item) {\n                item.KID = dashManifestModel.getKID(item);\n            });\n        }\n\n        mediaInfo.isText = dashManifestModel.getIsTextTrack(mediaInfo.mimeType);\n\n        return mediaInfo;\n    }\n\n    function convertVideoInfoToEmbeddedTextInfo(mediaInfo, channel, lang) {\n        mediaInfo.id = channel; // CC1, CC2, CC3, or CC4\n        mediaInfo.index = 100 + parseInt(channel.substring(2, 3));\n        mediaInfo.type = Constants.EMBEDDED_TEXT;\n        mediaInfo.codec = 'cea-608-in-SEI';\n        mediaInfo.isText = true;\n        mediaInfo.isEmbedded = true;\n        mediaInfo.lang = channel + ' ' + lang;\n        mediaInfo.roles = ['caption'];\n    }\n\n    function convertPeriodToStreamInfo(period) {\n        let streamInfo = new StreamInfo();\n        const THRESHOLD = 1;\n\n        streamInfo.id = period.id;\n        streamInfo.index = period.index;\n        streamInfo.start = period.start;\n        streamInfo.duration = period.duration;\n        streamInfo.manifestInfo = convertMpdToManifestInfo(period.mpd);\n        streamInfo.isLast = period.mpd.manifest.Period_asArray.length === 1 || Math.abs((streamInfo.start + streamInfo.duration) - streamInfo.manifestInfo.duration) < THRESHOLD;\n\n        return streamInfo;\n    }\n\n    function convertMpdToManifestInfo(mpd) {\n        let manifestInfo = new ManifestInfo();\n\n        manifestInfo.DVRWindowSize = mpd.timeShiftBufferDepth;\n        manifestInfo.loadedTime = mpd.manifest.loadedTime;\n        manifestInfo.availableFrom = mpd.availabilityStartTime;\n        manifestInfo.minBufferTime = mpd.manifest.minBufferTime;\n        manifestInfo.maxFragmentDuration = mpd.maxSegmentDuration;\n        manifestInfo.duration = dashManifestModel.getDuration(mpd.manifest);\n        manifestInfo.isDynamic = dashManifestModel.getIsDynamic(mpd.manifest);\n\n        return manifestInfo;\n    }\n\n    function getMediaInfoForType(streamInfo, type) {\n\n        if (voPeriods.length === 0) {\n            return null;\n        }\n\n        const manifest = voPeriods[0].mpd.manifest;\n        let realAdaptation = dashManifestModel.getAdaptationForType(manifest, streamInfo.index, type, streamInfo);\n        if (!realAdaptation) return null;\n\n        let selectedVoPeriod = getPeriodForStreamInfo(streamInfo, voPeriods);\n        let periodId = selectedVoPeriod.id;\n        let idx = dashManifestModel.getIndexForAdaptation(realAdaptation, manifest, streamInfo.index);\n\n        voAdaptations[periodId] = voAdaptations[periodId] || dashManifestModel.getAdaptationsForPeriod(selectedVoPeriod);\n\n        return convertAdaptationToMediaInfo(voAdaptations[periodId][idx]);\n    }\n\n    function getAllMediaInfoForType(streamInfo, type, externalManifest) {\n        let voLocalPeriods = voPeriods;\n        let manifest = externalManifest;\n        let mediaArr = [];\n        let data,\n            media,\n            idx,\n            i,\n            j,\n            ln;\n\n        if (manifest) {\n            checkSetConfigCall();\n            const mpd = dashManifestModel.getMpd(manifest);\n\n            voLocalPeriods = dashManifestModel.getRegularPeriods(mpd);\n\n        }else {\n            if (voPeriods.length > 0) {\n                manifest = voPeriods[0].mpd.manifest;\n            } else {\n                return mediaArr;\n            }\n        }\n\n        const selectedVoPeriod = getPeriodForStreamInfo(streamInfo, voLocalPeriods);\n        const periodId = selectedVoPeriod.id;\n        const adaptationsForType = dashManifestModel.getAdaptationsForType(manifest, streamInfo.index, type !== Constants.EMBEDDED_TEXT ? type : Constants.VIDEO);\n\n        if (!adaptationsForType) return mediaArr;\n\n        voAdaptations[periodId] = voAdaptations[periodId] || dashManifestModel.getAdaptationsForPeriod(selectedVoPeriod);\n\n        for (i = 0, ln = adaptationsForType.length; i < ln; i++) {\n            data = adaptationsForType[i];\n            idx = dashManifestModel.getIndexForAdaptation(data, manifest, streamInfo.index);\n            media = convertAdaptationToMediaInfo(voAdaptations[periodId][idx]);\n\n            if (type === Constants.EMBEDDED_TEXT) {\n                let accessibilityLength = media.accessibility.length;\n                for (j = 0; j < accessibilityLength; j++) {\n                    if (!media) {\n                        continue;\n                    }\n                    let accessibility = media.accessibility[j];\n                    if (accessibility.indexOf('cea-608:') === 0) {\n                        let value = accessibility.substring(8);\n                        let parts = value.split(';');\n                        if (parts[0].substring(0, 2) === 'CC') {\n                            for (j = 0; j < parts.length; j++) {\n                                if (!media) {\n                                    media = convertAdaptationToMediaInfo.call(this, voAdaptations[periodId][idx]);\n                                }\n                                convertVideoInfoToEmbeddedTextInfo(media, parts[j].substring(0, 3), parts[j].substring(4));\n                                mediaArr.push(media);\n                                media = null;\n                            }\n                        } else {\n                            for (j = 0; j < parts.length; j++) { // Only languages for CC1, CC2, ...\n                                if (!media) {\n                                    media = convertAdaptationToMediaInfo.call(this, voAdaptations[periodId][idx]);\n                                }\n                                convertVideoInfoToEmbeddedTextInfo(media, 'CC' + (j + 1), parts[j]);\n                                mediaArr.push(media);\n                                media = null;\n                            }\n                        }\n                    } else if (accessibility.indexOf('cea-608') === 0) { // Nothing known. We interpret it as CC1=eng\n                        convertVideoInfoToEmbeddedTextInfo(media, Constants.CC1, 'eng');\n                        mediaArr.push(media);\n                        media = null;\n                    }\n                }\n            }\n            if (media && type !== Constants.EMBEDDED_TEXT) {\n                mediaArr.push(media);\n            }\n        }\n\n        return mediaArr;\n    }\n\n    function checkSetConfigCall() {\n        if (!dashManifestModel || !dashManifestModel.hasOwnProperty('getMpd') || !dashManifestModel.hasOwnProperty('getRegularPeriods')) {\n            throw new Error('setConfig function has to be called previously');\n        }\n    }\n\n    function updatePeriods(newManifest) {\n        if (!newManifest) return null;\n\n        checkSetConfigCall();\n\n        const mpd = dashManifestModel.getMpd(newManifest);\n\n        voPeriods = dashManifestModel.getRegularPeriods(mpd);\n        voAdaptations = {};\n    }\n\n    function getStreamsInfo(externalManifest) {\n        const streams = [];\n        let voLocalPeriods = voPeriods;\n\n        //if manifest is defined, getStreamsInfo is for an outside manifest, not the current one\n        if (externalManifest) {\n            checkSetConfigCall();\n            const mpd = dashManifestModel.getMpd(externalManifest);\n\n            voLocalPeriods = dashManifestModel.getRegularPeriods(mpd);\n        }\n\n        for (let i = 0; i < voLocalPeriods.length; i++) {\n            streams.push(convertPeriodToStreamInfo(voLocalPeriods[i]));\n        }\n\n        return streams;\n    }\n\n    function checkStreamProcessor(streamProcessor) {\n        if (!streamProcessor || !streamProcessor.hasOwnProperty('getRepresentationController') || !streamProcessor.hasOwnProperty('getIndexHandler') ||\n            !streamProcessor.hasOwnProperty('getMediaInfo') || !streamProcessor.hasOwnProperty('getType') || !streamProcessor.hasOwnProperty('getStreamInfo')) {\n            throw new Error('streamProcessor parameter is missing or malformed!');\n        }\n    }\n\n    function checkRepresentationController(representationController) {\n        if (!representationController || !representationController.hasOwnProperty('getRepresentationForQuality') || !representationController.hasOwnProperty('getCurrentRepresentation')) {\n            throw new Error('representationController parameter is missing or malformed!');\n        }\n    }\n\n    function checkQuality(quality) {\n        const isInt = quality !== null && !isNaN(quality) && (quality % 1 === 0);\n\n        if (!isInt) {\n            throw new Error('quality argument is not an integer');\n        }\n    }\n\n    function getInitRequest(streamProcessor, quality) {\n        let representationController,\n            representation,\n            indexHandler;\n\n        checkStreamProcessor(streamProcessor);\n        checkQuality(quality);\n\n        representationController = streamProcessor.getRepresentationController();\n        indexHandler = streamProcessor.getIndexHandler();\n\n        representation = representationController ? representationController.getRepresentationForQuality(quality) : null;\n\n        return indexHandler ? indexHandler.getInitRequest(representation) : null;\n    }\n\n    function getNextFragmentRequest(streamProcessor, trackInfo) {\n        let representationController,\n            representation,\n            indexHandler;\n\n        checkStreamProcessor(streamProcessor);\n\n        representationController = streamProcessor.getRepresentationController();\n        representation = getRepresentationForTrackInfo(trackInfo, representationController);\n        indexHandler = streamProcessor.getIndexHandler();\n\n        return indexHandler ? indexHandler.getNextSegmentRequest(representation) : null;\n    }\n\n    function getFragmentRequestForTime(streamProcessor, trackInfo, time, options) {\n        let representationController,\n            representation,\n            indexHandler;\n\n        checkStreamProcessor(streamProcessor);\n\n        representationController = streamProcessor.getRepresentationController();\n        representation = getRepresentationForTrackInfo(trackInfo, representationController);\n        indexHandler = streamProcessor.getIndexHandler();\n\n        return indexHandler ? indexHandler.getSegmentRequestForTime(representation, time, options) : null;\n    }\n\n    function generateFragmentRequestForTime(streamProcessor, trackInfo, time) {\n        let representationController,\n            representation,\n            indexHandler;\n\n        checkStreamProcessor(streamProcessor);\n\n        representationController = streamProcessor.getRepresentationController();\n        representation = getRepresentationForTrackInfo(trackInfo, representationController);\n        indexHandler = streamProcessor.getIndexHandler();\n\n        return indexHandler ? indexHandler.generateSegmentRequestForTime(representation, time) : null;\n    }\n\n    function getIndexHandlerTime(streamProcessor) {\n        checkStreamProcessor(streamProcessor);\n\n        const indexHandler = streamProcessor.getIndexHandler();\n\n        if (indexHandler) {\n            return indexHandler.getCurrentTime();\n        }\n        return NaN;\n    }\n\n    function setIndexHandlerTime(streamProcessor, value) {\n        checkStreamProcessor(streamProcessor);\n\n        const indexHandler = streamProcessor.getIndexHandler();\n        if (indexHandler) {\n            indexHandler.setCurrentTime(value);\n        }\n    }\n\n    function updateData(streamProcessor) {\n        checkStreamProcessor(streamProcessor);\n\n        const selectedVoPeriod = getPeriodForStreamInfo(streamProcessor.getStreamInfo(), voPeriods);\n        const mediaInfo = streamProcessor.getMediaInfo();\n        const voAdaptation = getAdaptationForMediaInfo(mediaInfo);\n        const type = streamProcessor.getType();\n\n        let id,\n            realAdaptation;\n\n        id = mediaInfo ? mediaInfo.id : null;\n        if (voPeriods.length > 0) {\n            realAdaptation = id ? dashManifestModel.getAdaptationForId(id, voPeriods[0].mpd.manifest, selectedVoPeriod.index) : dashManifestModel.getAdaptationForIndex(mediaInfo.index, voPeriods[0].mpd.manifest, selectedVoPeriod.index);\n            streamProcessor.getRepresentationController().updateData(realAdaptation, voAdaptation, type);\n        }\n    }\n\n    function getRepresentationInfoForQuality(representationController, quality) {\n        checkRepresentationController(representationController);\n        checkQuality(quality);\n\n        let voRepresentation = representationController.getRepresentationForQuality(quality);\n        return voRepresentation ? convertRepresentationToTrackInfo(voRepresentation) : null;\n    }\n\n    function getCurrentRepresentationInfo(representationController) {\n        checkRepresentationController(representationController);\n        let voRepresentation = representationController.getCurrentRepresentation();\n        return voRepresentation ? convertRepresentationToTrackInfo(voRepresentation) : null;\n    }\n\n    function getEvent(eventBox, eventStreams, startTime) {\n        if (!eventBox || !eventStreams) {\n            return null;\n        }\n        let event = new Event();\n        const schemeIdUri = eventBox.scheme_id_uri;\n        const value = eventBox.value;\n        const timescale = eventBox.timescale;\n        const presentationTimeDelta = eventBox.presentation_time_delta;\n        const duration = eventBox.event_duration;\n        const id = eventBox.id;\n        const messageData = eventBox.message_data;\n        const presentationTime = startTime * timescale + presentationTimeDelta;\n\n        if (!eventStreams[schemeIdUri]) return null;\n\n        event.eventStream = eventStreams[schemeIdUri];\n        event.eventStream.value = value;\n        event.eventStream.timescale = timescale;\n        event.duration = duration;\n        event.id = id;\n        event.presentationTime = presentationTime;\n        event.messageData = messageData;\n        event.presentationTimeDelta = presentationTimeDelta;\n\n        return event;\n    }\n\n    function getEventsFor(info, streamProcessor) {\n\n        let events = [];\n\n        if (voPeriods.length === 0) {\n            return events;\n        }\n\n        const manifest = voPeriods[0].mpd.manifest;\n\n        if (info instanceof StreamInfo) {\n            events = dashManifestModel.getEventsForPeriod(getPeriodForStreamInfo(info, voPeriods));\n        } else if (info instanceof MediaInfo) {\n            events = dashManifestModel.getEventStreamForAdaptationSet(manifest, getAdaptationForMediaInfo(info));\n        } else if (info instanceof TrackInfo) {\n            events = dashManifestModel.getEventStreamForRepresentation(manifest, getRepresentationForTrackInfo(info, streamProcessor.getRepresentationController()));\n        }\n\n        return events;\n    }\n\n    function reset() {\n        voPeriods = [];\n        voAdaptations = {};\n    }\n\n    instance = {\n        convertDataToTrack: convertRepresentationToTrackInfo,\n        getDataForMedia: getAdaptationForMediaInfo,\n        getStreamsInfo: getStreamsInfo,\n        getMediaInfoForType: getMediaInfoForType,\n        getAllMediaInfoForType: getAllMediaInfoForType,\n        getCurrentRepresentationInfo: getCurrentRepresentationInfo,\n        getRepresentationInfoForQuality: getRepresentationInfoForQuality,\n        updateData: updateData,\n        getInitRequest: getInitRequest,\n        getNextFragmentRequest: getNextFragmentRequest,\n        getFragmentRequestForTime: getFragmentRequestForTime,\n        generateFragmentRequestForTime: generateFragmentRequestForTime,\n        getIndexHandlerTime: getIndexHandlerTime,\n        setIndexHandlerTime: setIndexHandlerTime,\n        getEventsFor: getEventsFor,\n        getEvent: getEvent,\n        setConfig: setConfig,\n        updatePeriods: updatePeriods,\n        reset: reset\n    };\n\n    setup();\n    return instance;\n}\n\nDashAdapter.__dashjs_factory_name = 'DashAdapter';\nexport default FactoryMaker.getSingletonFactory(DashAdapter);\n"]}