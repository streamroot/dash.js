{"version":3,"sources":["../../../../../src/dash/models/DashManifestModel.js"],"names":[],"mappings":"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","file":"DashManifestModel.js","sourcesContent":["/**\n * The copyright in this software is being made available under the BSD License,\n * included below. This software may be subject to other third party and contributor\n * rights, including patent rights, and no such rights are granted under this license.\n *\n * Copyright (c) 2013, Dash Industry Forum.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *  * Redistributions of source code must retain the above copyright notice, this\n *  list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *  this list of conditions and the following disclaimer in the documentation and/or\n *  other materials provided with the distribution.\n *  * Neither the name of Dash Industry Forum nor the names of its\n *  contributors may be used to endorse or promote products derived from this software\n *  without specific prior written permission.\n *\n *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS AS IS AND ANY\n *  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n *  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n *  IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n *  INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n *  NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n *  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n *  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n *  POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport Representation from '../vo/Representation';\nimport AdaptationSet from '../vo/AdaptationSet';\nimport Period from '../vo/Period';\nimport Mpd from '../vo/Mpd';\nimport UTCTiming from '../vo/UTCTiming';\nimport TimelineConverter from '../utils/TimelineConverter';\nimport MediaController from '../../streaming/controllers/MediaController';\nimport DashAdapter from '../DashAdapter';\nimport Event from '../vo/Event';\nimport BaseURL from '../vo/BaseURL';\nimport EventStream from '../vo/EventStream';\nimport URLUtils from '../../streaming/utils/URLUtils';\nimport FactoryMaker from '../../core/FactoryMaker';\n\nfunction DashManifestModel() {\n\n    let instance;\n    let context = this.context;\n    let timelineConverter = TimelineConverter(context).getInstance();//TODO Need to pass this in not bake in\n    let mediaController = MediaController(context).getInstance();\n    let adaptor = DashAdapter(context).getInstance();\n\n    const urlUtils = URLUtils(context).getInstance();\n\n    function getIsTypeOf(adaptation, type) {\n\n        var i,\n            len,\n            representation;\n        var result = false;\n        var found = false;\n\n        var col = adaptation.ContentComponent_asArray;\n        var mimeTypeRegEx = (type !== 'text') ? new RegExp(type) : new RegExp('(vtt|ttml)');\n\n        if ((adaptation.Representation_asArray.length > 0) &&\n            (adaptation.Representation_asArray[0].hasOwnProperty('codecs'))) {\n            // Just check the start of the codecs string\n            var codecs = adaptation.Representation_asArray[0].codecs;\n            if (codecs.search('stpp') === 0 || codecs.search('wvtt') === 0) {\n                return type === 'fragmentedText';\n            }\n        }\n\n        if (col) {\n            if (col.length > 1) {\n                return (type === 'muxed');\n            } else if (col[0] && col[0].contentType === type) {\n                result = true;\n                found = true;\n            }\n        }\n\n        if (adaptation.hasOwnProperty('mimeType')) {\n            result = mimeTypeRegEx.test(adaptation.mimeType);\n            found = true;\n        }\n\n        // couldn't find on adaptationset, so check a representation\n        if (!found) {\n            i = 0;\n            len = adaptation.Representation_asArray.length;\n            while (!found && i < len) {\n                representation = adaptation.Representation_asArray[i];\n\n                if (representation.hasOwnProperty('mimeType')) {\n                    result = mimeTypeRegEx.test(representation.mimeType);\n                    found = true;\n                }\n\n                i++;\n            }\n        }\n\n        return result;\n    }\n\n    function getIsAudio(adaptation) {\n        return getIsTypeOf(adaptation, 'audio');\n    }\n\n    function getIsVideo(adaptation) {\n        return getIsTypeOf(adaptation, 'video');\n    }\n\n    function getIsFragmentedText(adaptation) {\n        return getIsTypeOf(adaptation, 'fragmentedText');\n    }\n\n    function getIsText(adaptation) {\n        return getIsTypeOf(adaptation, 'text');\n    }\n\n    function getIsMuxed(adaptation) {\n        return getIsTypeOf(adaptation, 'muxed');\n    }\n\n    function getIsTextTrack(type) {\n        return (type === 'text/vtt' || type === 'application/ttml+xml');\n    }\n\n    function getLanguageForAdaptation(adaptation) {\n        var lang = '';\n\n        if (adaptation.hasOwnProperty('lang')) {\n            //Filter out any other characters not allowed according to RFC5646\n            lang = adaptation.lang.replace(/[^A-Za-z0-9-]/g,'');\n        }\n\n        return lang;\n    }\n\n    function getViewpointForAdaptation(adaptation) {\n        return adaptation.hasOwnProperty('Viewpoint') ? adaptation.Viewpoint : null;\n    }\n\n    function getRolesForAdaptation(adaptation) {\n        return adaptation.hasOwnProperty('Role_asArray') ? adaptation.Role_asArray : [];\n    }\n\n    function getAccessibilityForAdaptation(adaptation) {\n        return adaptation.hasOwnProperty('Accessibility_asArray') ? adaptation.Accessibility_asArray : [];\n    }\n\n    function getAudioChannelConfigurationForAdaptation(adaptation) {\n        return adaptation.hasOwnProperty('AudioChannelConfiguration_asArray') ? adaptation.AudioChannelConfiguration_asArray : [];\n    }\n\n    function getIsMain(adaptation) {\n        return getRolesForAdaptation(adaptation).filter(function (role) {\n            return role.value === 'main';\n        })[0];\n    }\n\n    function getRepresentationSortFunction() {\n        return (a, b) => a.bandwidth - b.bandwidth;\n    }\n\n    function processAdaptation(adaptation) {\n        if (adaptation.Representation_asArray !== undefined && adaptation.Representation_asArray !== null) {\n            adaptation.Representation_asArray.sort(getRepresentationSortFunction());\n        }\n\n        return adaptation;\n    }\n\n    function getAdaptationForId(id, manifest, periodIndex) {\n\n        var adaptations = manifest.Period_asArray[periodIndex].AdaptationSet_asArray;\n        var i,\n            len;\n\n        for (i = 0, len = adaptations.length; i < len; i++) {\n            if (adaptations[i].hasOwnProperty('id') && adaptations[i].id === id) {\n                return adaptations[i];\n            }\n        }\n\n        return null;\n    }\n\n    function getAdaptationForIndex(index, manifest, periodIndex) {\n        var adaptations = manifest.Period_asArray[periodIndex].AdaptationSet_asArray;\n        return adaptations[index];\n    }\n\n    function getIndexForAdaptation(adaptation, manifest, periodIndex) {\n\n        var adaptations = manifest.Period_asArray[periodIndex].AdaptationSet_asArray;\n        var i,\n            len;\n\n        for (i = 0, len = adaptations.length; i < len; i++) {\n            if (adaptations[i] === adaptation) {\n                return i;\n            }\n        }\n\n        return -1;\n    }\n\n    function getAdaptationsForType(manifest, periodIndex, type) {\n\n        var adaptationSet = manifest.Period_asArray[periodIndex].AdaptationSet_asArray;\n        var i,\n            len;\n        var adaptations = [];\n\n        for (i = 0, len = adaptationSet.length; i < len; i++) {\n            if (getIsTypeOf(adaptationSet[i], type)) {\n                adaptations.push(processAdaptation(adaptationSet[i]));\n            }\n        }\n\n        return adaptations;\n    }\n\n    function getAdaptationForType(manifest, periodIndex, type, streamInfo) {\n\n        let adaptations = getAdaptationsForType(manifest, periodIndex, type);\n\n        if (!adaptations || adaptations.length === 0) return null;\n\n        if (adaptations.length > 1 && streamInfo) {\n            let currentTrack = mediaController.getCurrentTrackFor(type, streamInfo);\n            let allMediaInfoForType = adaptor.getAllMediaInfoForType(manifest, streamInfo, type);\n            for (let i = 0, ln = adaptations.length; i < ln; i++) {\n                if (currentTrack && mediaController.isTracksEqual(currentTrack, allMediaInfoForType[i])) {\n                    return adaptations[i];\n                }\n                if (getIsMain(adaptations[i])) {\n                    return adaptations[i];\n                }\n            }\n        }\n\n        return adaptations[0];\n    }\n\n    function getCodec(adaptation) {\n        var representation = adaptation.Representation_asArray[0];\n        return (representation.mimeType + ';codecs=\"' + representation.codecs + '\"');\n    }\n\n    function getMimeType(adaptation) {\n        return adaptation.Representation_asArray[0].mimeType;\n    }\n\n    function getKID(adaptation) {\n        if (!adaptation || !adaptation.hasOwnProperty('cenc:default_KID')) {\n            return null;\n        }\n        return adaptation['cenc:default_KID'];\n    }\n\n    function getContentProtectionData(adaptation) {\n        if (!adaptation || !adaptation.hasOwnProperty('ContentProtection_asArray') || adaptation.ContentProtection_asArray.length === 0) {\n            return null;\n        }\n        return adaptation.ContentProtection_asArray;\n    }\n\n    function getIsDynamic(manifest) {\n        var isDynamic = false;\n        if (manifest.hasOwnProperty('type')) {\n            isDynamic = (manifest.type === 'dynamic');\n        }\n        return isDynamic;\n    }\n\n    function getIsDVR(manifest) {\n        var isDynamic = getIsDynamic(manifest);\n        var containsDVR,\n            isDVR;\n\n        containsDVR = !isNaN(manifest.timeShiftBufferDepth);\n        isDVR = (isDynamic && containsDVR);\n\n        return isDVR;\n    }\n\n    function hasProfile(manifest, profile) {\n        var has = false;\n\n        if (manifest.profiles && manifest.profiles.length > 0) {\n            has = (manifest.profiles.indexOf(profile) !== -1);\n        }\n\n        return has;\n    }\n\n    function getIsOnDemand(manifest) {\n        return hasProfile(manifest, 'urn:mpeg:dash:profile:isoff-on-demand:2011');\n    }\n\n    function getIsDVB(manifest) {\n        return hasProfile(manifest, 'urn:dvb:dash:profile:dvb-dash:2014');\n    }\n\n    function getDuration(manifest) {\n        var mpdDuration;\n        //@mediaPresentationDuration specifies the duration of the entire Media Presentation.\n        //If the attribute is not present, the duration of the Media Presentation is unknown.\n        if (manifest.hasOwnProperty('mediaPresentationDuration')) {\n            mpdDuration = manifest.mediaPresentationDuration;\n        } else {\n            mpdDuration = Number.MAX_VALUE;\n        }\n\n        return mpdDuration;\n    }\n\n    function getBandwidth(representation) {\n        return representation.bandwidth;\n    }\n\n    function getManifestUpdatePeriod(manifest, latencyOfLastUpdate = 0) {\n        let delay = NaN;\n        if (manifest.hasOwnProperty('minimumUpdatePeriod')) {\n            delay = manifest.minimumUpdatePeriod;\n        }\n        return isNaN(delay) ? delay : Math.max(delay - latencyOfLastUpdate, 1);\n    }\n\n    function getRepresentationCount(adaptation) {\n        return adaptation.Representation_asArray.length;\n    }\n\n    function getBitrateListForAdaptation(adaptation) {\n        if (!adaptation || !adaptation.Representation_asArray || !adaptation.Representation_asArray.length) return null;\n\n        var a = processAdaptation(adaptation);\n        var reps = a.Representation_asArray;\n        var ln = reps.length;\n        var bitrateList = [];\n\n        for (var i = 0; i < ln; i++) {\n            bitrateList.push({\n                bandwidth: reps[i].bandwidth,\n                width: reps[i].width || 0,\n                height: reps[i].height || 0\n            });\n        }\n\n        return bitrateList;\n    }\n\n    function getRepresentationFor(index, adaptation) {\n        return adaptation.Representation_asArray[index];\n    }\n\n    function getRepresentationsForAdaptation(manifest, adaptation) {\n        var a = processAdaptation(manifest.Period_asArray[adaptation.period.index].AdaptationSet_asArray[adaptation.index]);\n        var representations = [];\n        var representation,\n            initialization,\n            segmentInfo,\n            r,\n            s;\n\n        for (var i = 0; i < a.Representation_asArray.length; i++) {\n            r = a.Representation_asArray[i];\n            representation = new Representation();\n            representation.index = i;\n            representation.adaptation = adaptation;\n\n            if (r.hasOwnProperty('id')) {\n                representation.id = r.id;\n            }\n\n            if (r.hasOwnProperty('bandwidth')) {\n                representation.bandwidth = r.bandwidth;\n            }\n            if (r.hasOwnProperty('maxPlayoutRate')) {\n                representation.maxPlayoutRate = r.maxPlayoutRate;\n            }\n            if (r.hasOwnProperty('SegmentBase')) {\n                segmentInfo = r.SegmentBase;\n                representation.segmentInfoType = 'SegmentBase';\n            }\n            else if (r.hasOwnProperty('SegmentList')) {\n                segmentInfo = r.SegmentList;\n\n                if (segmentInfo.hasOwnProperty('SegmentTimeline')) {\n                    representation.segmentInfoType = 'SegmentTimeline';\n                    s = segmentInfo.SegmentTimeline.S_asArray[segmentInfo.SegmentTimeline.S_asArray.length - 1];\n                    if (!s.hasOwnProperty('r') || s.r >= 0) {\n                        representation.useCalculatedLiveEdgeTime = true;\n                    }\n                } else {\n                    representation.segmentInfoType = 'SegmentList';\n                    representation.useCalculatedLiveEdgeTime = true;\n                }\n            }\n            else if (r.hasOwnProperty('SegmentTemplate')) {\n                segmentInfo = r.SegmentTemplate;\n\n                if (segmentInfo.hasOwnProperty('SegmentTimeline')) {\n                    representation.segmentInfoType = 'SegmentTimeline';\n                    s = segmentInfo.SegmentTimeline.S_asArray[segmentInfo.SegmentTimeline.S_asArray.length - 1];\n                    if (!s.hasOwnProperty('r') || s.r >= 0) {\n                        representation.useCalculatedLiveEdgeTime = true;\n                    }\n                } else {\n                    representation.segmentInfoType = 'SegmentTemplate';\n                }\n\n                if (segmentInfo.hasOwnProperty('initialization')) {\n                    representation.initialization = segmentInfo.initialization.split('$Bandwidth$')\n                        .join(r.bandwidth).split('$RepresentationID$').join(r.id);\n                }\n            } else {\n                representation.segmentInfoType = 'BaseURL';\n            }\n\n            if (segmentInfo) {\n                if (segmentInfo.hasOwnProperty('Initialization')) {\n                    initialization = segmentInfo.Initialization;\n                    if (initialization.hasOwnProperty('sourceURL')) {\n                        representation.initialization = initialization.sourceURL;\n                    } else if (initialization.hasOwnProperty('range')) {\n                        representation.range = initialization.range;\n                        // initialization source url will be determined from\n                        // BaseURL when resolved at load time.\n                    }\n                } else if (r.hasOwnProperty('mimeType') && getIsTextTrack(r.mimeType)) {\n                    representation.range = 0;\n                }\n\n                if (segmentInfo.hasOwnProperty('timescale')) {\n                    representation.timescale = segmentInfo.timescale;\n                }\n                if (segmentInfo.hasOwnProperty('duration')) {\n                    // TODO according to the spec @maxSegmentDuration specifies the maximum duration of any Segment in any Representation in the Media Presentation\n                    // It is also said that for a SegmentTimeline any @d value shall not exceed the value of MPD@maxSegmentDuration, but nothing is said about\n                    // SegmentTemplate @duration attribute. We need to find out if @maxSegmentDuration should be used instead of calculated duration if the the duration\n                    // exceeds @maxSegmentDuration\n                    //representation.segmentDuration = Math.min(segmentInfo.duration / representation.timescale, adaptation.period.mpd.maxSegmentDuration);\n                    representation.segmentDuration = segmentInfo.duration / representation.timescale;\n                }\n                if (segmentInfo.hasOwnProperty('startNumber')) {\n                    representation.startNumber = segmentInfo.startNumber;\n                }\n                if (segmentInfo.hasOwnProperty('indexRange')) {\n                    representation.indexRange = segmentInfo.indexRange;\n                }\n                if (segmentInfo.hasOwnProperty('presentationTimeOffset')) {\n                    representation.presentationTimeOffset = segmentInfo.presentationTimeOffset / representation.timescale;\n                }\n            }\n\n            representation.MSETimeOffset = timelineConverter.calcMSETimeOffset(representation);\n\n            representation.path = [adaptation.period.index, adaptation.index, i];\n\n            representations.push(representation);\n        }\n\n        return representations;\n    }\n\n    function getAdaptationsForPeriod(manifest, period) {\n        var p = manifest.Period_asArray[period.index];\n        var adaptations = [];\n        var adaptationSet,\n            a;\n\n        for (var i = 0; i < p.AdaptationSet_asArray.length; i++) {\n            a = p.AdaptationSet_asArray[i];\n            adaptationSet = new AdaptationSet();\n\n            if (a.hasOwnProperty('id')) {\n                adaptationSet.id = a.id;\n            }\n\n            adaptationSet.index = i;\n            adaptationSet.period = period;\n\n            if (getIsMuxed(a)) {\n                adaptationSet.type = 'muxed';\n            } else if (getIsAudio(a)) {\n                adaptationSet.type = 'audio';\n            }else if (getIsVideo(a)) {\n                adaptationSet.type = 'video';\n            }else if (getIsFragmentedText(a)) {\n                adaptationSet.type = 'fragmentedText';\n            }else {\n                adaptationSet.type = 'text';\n            }\n\n            adaptations.push(adaptationSet);\n        }\n\n        return adaptations;\n    }\n\n    function getRegularPeriods(manifest, mpd) {\n        var isDynamic = getIsDynamic(manifest);\n        var periods = [];\n        var p1 = null;\n        var p = null;\n        var vo1 = null;\n        var vo = null;\n        var len,\n            i;\n\n        for (i = 0, len = manifest.Period_asArray.length; i < len; i++) {\n            p = manifest.Period_asArray[i];\n\n            // If the attribute @start is present in the Period, then the\n            // Period is a regular Period and the PeriodStart is equal\n            // to the value of this attribute.\n            if (p.hasOwnProperty('start')) {\n                vo = new Period();\n                vo.start = p.start;\n            }\n            // If the @start attribute is absent, but the previous Period\n            // element contains a @duration attribute then then this new\n            // Period is also a regular Period. The start time of the new\n            // Period PeriodStart is the sum of the start time of the previous\n            // Period PeriodStart and the value of the attribute @duration\n            // of the previous Period.\n            else if (p1 !== null && p.hasOwnProperty('duration') && vo1 !== null) {\n                vo = new Period();\n                vo.start = vo1.start + vo1.duration;\n                vo.duration = p.duration;\n            }\n            // If (i) @start attribute is absent, and (ii) the Period element\n            // is the first in the MPD, and (iii) the MPD@type is 'static',\n            // then the PeriodStart time shall be set to zero.\n            else if (i === 0 && !isDynamic) {\n                vo = new Period();\n                vo.start = 0;\n            }\n\n            // The Period extends until the PeriodStart of the next Period.\n            // The difference between the PeriodStart time of a Period and\n            // the PeriodStart time of the following Period.\n            if (vo1 !== null && isNaN(vo1.duration))\n            {\n                vo1.duration = vo.start - vo1.start;\n            }\n\n            if (vo !== null) {\n                vo.id = getPeriodId(p, i);\n            }\n\n            if (vo !== null && p.hasOwnProperty('duration')) {\n                vo.duration = p.duration;\n            }\n\n            if (vo !== null) {\n                vo.index = i;\n                vo.mpd = mpd;\n                periods.push(vo);\n                p1 = p;\n                vo1 = vo;\n            }\n\n            p = null;\n            vo = null;\n        }\n\n        if (periods.length === 0) {\n            return periods;\n        }\n\n        // The last Period extends until the end of the Media Presentation.\n        // The difference between the PeriodStart time of the last Period\n        // and the mpd duration\n        if (vo1 !== null && isNaN(vo1.duration)) {\n            vo1.duration = getEndTimeForLastPeriod(manifest, vo1) - vo1.start;\n        }\n\n        return periods;\n    }\n\n    function getPeriodId(p, i) {\n        if (!p) {\n            throw new Error('Period cannot be null or undefined');\n        }\n\n        let id = Period.DEFAULT_ID + '_' + i;\n\n        if (p.hasOwnProperty('id') && p.id !== '__proto__') {\n            id = p.id;\n        }\n\n        return id;\n    }\n\n    function getMpd(manifest) {\n        var mpd = new Mpd();\n\n        mpd.manifest = manifest;\n\n        if (manifest.hasOwnProperty('availabilityStartTime')) {\n            mpd.availabilityStartTime = new Date(manifest.availabilityStartTime.getTime());\n        } else {\n            mpd.availabilityStartTime = new Date(manifest.loadedTime.getTime());\n        }\n\n        if (manifest.hasOwnProperty('availabilityEndTime')) {\n            mpd.availabilityEndTime = new Date(manifest.availabilityEndTime.getTime());\n        }\n\n        if (manifest.hasOwnProperty('minimumUpdatePeriod')) {\n            mpd.minimumUpdatePeriod = manifest.minimumUpdatePeriod;\n        }\n\n        if (manifest.hasOwnProperty('mediaPresentationDuration')) {\n            mpd.mediaPresentationDuration = manifest.mediaPresentationDuration;\n        }\n\n        if (manifest.hasOwnProperty('suggestedPresentationDelay')) {\n            mpd.suggestedPresentationDelay = manifest.suggestedPresentationDelay;\n        }\n\n        if (manifest.hasOwnProperty('timeShiftBufferDepth')) {\n            mpd.timeShiftBufferDepth = manifest.timeShiftBufferDepth;\n        }\n\n        if (manifest.hasOwnProperty('maxSegmentDuration')) {\n            mpd.maxSegmentDuration = manifest.maxSegmentDuration;\n        }\n\n        return mpd;\n    }\n\n\n    function getEndTimeForLastPeriod(manifest, period) {\n        const isDynamic = getIsDynamic(manifest);\n\n        let periodEnd;\n        if (manifest.mediaPresentationDuration) {\n            periodEnd = manifest.mediaPresentationDuration;\n        } else if (period.duration) {\n            periodEnd = period.duration;\n        } else if (isDynamic) {\n            periodEnd = Number.POSITIVE_INFINITY;\n        } else {\n            throw new Error('Must have @mediaPresentationDuratio on MPD or an explicit @duration on the last period.');\n        }\n\n        return periodEnd;\n    }\n\n    function getEventsForPeriod(manifest, period) {\n\n        var periodArray = manifest.Period_asArray;\n        var eventStreams = periodArray[period.index].EventStream_asArray;\n        var events = [];\n\n        if (eventStreams) {\n            for (var i = 0; i < eventStreams.length; i++) {\n                var eventStream = new EventStream();\n                eventStream.period = period;\n                eventStream.timescale = 1;\n\n                if (eventStreams[i].hasOwnProperty('schemeIdUri')) {\n                    eventStream.schemeIdUri = eventStreams[i].schemeIdUri;\n                } else {\n                    throw new Error('Invalid EventStream. SchemeIdUri has to be set');\n                }\n                if (eventStreams[i].hasOwnProperty('timescale')) {\n                    eventStream.timescale = eventStreams[i].timescale;\n                }\n                if (eventStreams[i].hasOwnProperty('value')) {\n                    eventStream.value = eventStreams[i].value;\n                }\n                for (var j = 0; j < eventStreams[i].Event_asArray.length; j++) {\n                    var event = new Event();\n                    event.presentationTime = 0;\n                    event.eventStream = eventStream;\n\n                    if (eventStreams[i].Event_asArray[j].hasOwnProperty('presentationTime')) {\n                        event.presentationTime = eventStreams[i].Event_asArray[j].presentationTime;\n                    }\n                    if (eventStreams[i].Event_asArray[j].hasOwnProperty('duration')) {\n                        event.duration = eventStreams[i].Event_asArray[j].duration;\n                    }\n                    if (eventStreams[i].Event_asArray[j].hasOwnProperty('id')) {\n                        event.id = eventStreams[i].Event_asArray[j].id;\n                    }\n                    events.push(event);\n                }\n            }\n        }\n\n        return events;\n    }\n\n    function getEventStreams(inbandStreams, representation) {\n        var eventStreams = [];\n\n        if (!inbandStreams) return eventStreams;\n\n        for (var i = 0; i < inbandStreams.length ; i++ ) {\n            var eventStream = new EventStream();\n            eventStream.timescale = 1;\n            eventStream.representation =  representation;\n\n            if (inbandStreams[i].hasOwnProperty('schemeIdUri')) {\n                eventStream.schemeIdUri = inbandStreams[i].schemeIdUri;\n            } else {\n                throw new Error('Invalid EventStream. SchemeIdUri has to be set');\n            }\n            if (inbandStreams[i].hasOwnProperty('timescale')) {\n                eventStream.timescale = inbandStreams[i].timescale;\n            }\n            if (inbandStreams[i].hasOwnProperty('value')) {\n                eventStream.value = inbandStreams[i].value;\n            }\n            eventStreams.push(eventStream);\n        }\n\n        return eventStreams;\n    }\n\n    function getEventStreamForAdaptationSet(manifest, adaptation) {\n        var inbandStreams = manifest.Period_asArray[adaptation.period.index].\n            AdaptationSet_asArray[adaptation.index].InbandEventStream_asArray;\n\n        return getEventStreams(inbandStreams, null);\n    }\n\n    function getEventStreamForRepresentation(manifest, representation) {\n        var inbandStreams = manifest.Period_asArray[representation.adaptation.period.index].\n            AdaptationSet_asArray[representation.adaptation.index].Representation_asArray[representation.index].InbandEventStream_asArray;\n\n        return getEventStreams(inbandStreams, representation);\n    }\n\n    function getUTCTimingSources(manifest) {\n\n        var isDynamic = getIsDynamic(manifest);\n        var hasAST = manifest.hasOwnProperty('availabilityStartTime');\n        var utcTimingsArray = manifest.UTCTiming_asArray;\n        var utcTimingEntries = [];\n\n        // do not bother synchronizing the clock unless MPD is live,\n        // or it is static and has availabilityStartTime attribute\n        if ((isDynamic || hasAST)) {\n            if (utcTimingsArray) {\n                // the order is important here - 23009-1 states that the order\n                // in the manifest \"indicates relative preference, first having\n                // the highest, and the last the lowest priority\".\n                utcTimingsArray.forEach(function (utcTiming) {\n                    var entry = new UTCTiming();\n\n                    if (utcTiming.hasOwnProperty('schemeIdUri')) {\n                        entry.schemeIdUri = utcTiming.schemeIdUri;\n                    } else {\n                        // entries of type DescriptorType with no schemeIdUri\n                        // are meaningless. let's just ignore this entry and\n                        // move on.\n                        return;\n                    }\n\n                    // this is (incorrectly) interpreted as a number - schema\n                    // defines it as a string\n                    if (utcTiming.hasOwnProperty('value')) {\n                        entry.value = utcTiming.value.toString();\n                    } else {\n                        // without a value, there's not a lot we can do with\n                        // this entry. let's just ignore this one and move on\n                        return;\n                    }\n\n                    // we're not interested in the optional id or any other\n                    // attributes which might be attached to the entry\n\n                    utcTimingEntries.push(entry);\n                });\n            }\n        }\n\n        return utcTimingEntries;\n    }\n\n    function getBaseURLsFromElement(node) {\n        let baseUrls = [];\n        // if node.BaseURL_asArray and node.baseUri are undefined entries\n        // will be [undefined] which entries.some will just skip\n        let entries = node.BaseURL_asArray || [node.baseUri];\n        let earlyReturn = false;\n\n        entries.some(entry => {\n            if (entry) {\n                const baseUrl = new BaseURL();\n                let text = entry.__text || entry;\n\n                if (urlUtils.isRelative(text)) {\n                    // it doesn't really make sense to have relative and\n                    // absolute URLs at the same level, or multiple\n                    // relative URLs at the same level, so assume we are\n                    // done from this level of the MPD\n                    earlyReturn = true;\n\n                    // deal with the specific case where the MPD@BaseURL\n                    // is specified and is relative. when no MPD@BaseURL\n                    // entries exist, that case is handled by the\n                    // [node.baseUri] in the entries definition.\n                    if (node.baseUri) {\n                        text = node.baseUri + text;\n                    }\n                }\n\n                baseUrl.url = text;\n\n                // serviceLocation is optional, but we need it in order\n                // to blacklist correctly. if it's not available, use\n                // anything unique since there's no relationship to any\n                // other BaseURL and, in theory, the url should be\n                // unique so use this instead.\n                if (entry.hasOwnProperty('serviceLocation') &&\n                        entry.serviceLocation.length) {\n                    baseUrl.serviceLocation = entry.serviceLocation;\n                } else {\n                    baseUrl.serviceLocation = text;\n                }\n\n                if (entry.hasOwnProperty('dvb:priority')) {\n                    baseUrl.dvb_priority = entry['dvb:priority'];\n                }\n\n                if (entry.hasOwnProperty('dvb:weight')) {\n                    baseUrl.dvb_weight = entry['dvb:weight'];\n                }\n\n                /* NOTE: byteRange, availabilityTimeOffset,\n                 * availabilityTimeComplete currently unused\n                 */\n\n                baseUrls.push(baseUrl);\n\n                return earlyReturn;\n            }\n        });\n\n        return baseUrls;\n    }\n\n    function getLocation(manifest) {\n        if (manifest.hasOwnProperty('Location')) {\n            // for now, do not support multiple Locations -\n            // just set Location to the first Location.\n            manifest.Location = manifest.Location_asArray[0];\n        }\n\n        // may well be undefined\n        return manifest.Location;\n    }\n\n    instance = {\n        getIsTypeOf: getIsTypeOf,\n        getIsAudio: getIsAudio,\n        getIsVideo: getIsVideo,\n        getIsText: getIsText,\n        getIsMuxed: getIsMuxed,\n        getIsTextTrack: getIsTextTrack,\n        getIsFragmentedText: getIsFragmentedText,\n        getIsMain: getIsMain,\n        getLanguageForAdaptation: getLanguageForAdaptation,\n        getViewpointForAdaptation: getViewpointForAdaptation,\n        getRolesForAdaptation: getRolesForAdaptation,\n        getAccessibilityForAdaptation: getAccessibilityForAdaptation,\n        getAudioChannelConfigurationForAdaptation: getAudioChannelConfigurationForAdaptation,\n        processAdaptation: processAdaptation,\n        getAdaptationForIndex: getAdaptationForIndex,\n        getIndexForAdaptation: getIndexForAdaptation,\n        getAdaptationForId: getAdaptationForId,\n        getAdaptationsForType: getAdaptationsForType,\n        getAdaptationForType: getAdaptationForType,\n        getCodec: getCodec,\n        getMimeType: getMimeType,\n        getKID: getKID,\n        getContentProtectionData: getContentProtectionData,\n        getIsDynamic: getIsDynamic,\n        getIsDVR: getIsDVR,\n        getIsOnDemand: getIsOnDemand,\n        getIsDVB: getIsDVB,\n        getDuration: getDuration,\n        getBandwidth: getBandwidth,\n        getManifestUpdatePeriod: getManifestUpdatePeriod,\n        getRepresentationCount: getRepresentationCount,\n        getBitrateListForAdaptation: getBitrateListForAdaptation,\n        getRepresentationFor: getRepresentationFor,\n        getRepresentationsForAdaptation: getRepresentationsForAdaptation,\n        getAdaptationsForPeriod: getAdaptationsForPeriod,\n        getRegularPeriods: getRegularPeriods,\n        getMpd: getMpd,\n        getEventsForPeriod: getEventsForPeriod,\n        getEventStreams: getEventStreams,\n        getEventStreamForAdaptationSet: getEventStreamForAdaptationSet,\n        getEventStreamForRepresentation: getEventStreamForRepresentation,\n        getUTCTimingSources: getUTCTimingSources,\n        getBaseURLsFromElement: getBaseURLsFromElement,\n        getRepresentationSortFunction: getRepresentationSortFunction,\n        getLocation: getLocation\n    };\n\n    return instance;\n}\n\nDashManifestModel.__dashjs_factory_name = 'DashManifestModel';\nexport default FactoryMaker.getSingletonFactory(DashManifestModel);\n"]}